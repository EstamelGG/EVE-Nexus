/* 事件结论 */
工厂产出与仓库资源调配事件描述

1. 工厂产出事件：
   - 激活状态的工厂在生产周期结束后会输出一定数量的产品到预定目的地，并检查缓冲区内资源。
   - 如果缓冲区中的资源满足配方要求，则清空缓冲区并立即启动下一轮生产，工厂状态继续保持激活。
   - 如果缓冲区资源不足以满足配方要求，则工厂进入未激活状态，并保留当前缓冲区的资源，等待仓库补充后再次激活。

2. 仓库资源调配事件：
   - 仓库负责向与之关联的工厂提供所需资源，确保工厂缓冲区资源充足以满足生产需求。
   - 当多个工厂同时需要补给时，按以下规则排序：
        1) 缺货量越小的工厂优先分配资源；
        2) 如果缺货量相同，则工厂ID较小者优先分配。
   - 分配过程采取轮次分配方案：
        - 初始轮次：为各个需要补充资源的工厂分配资源；
        - 后续轮次：如果仓库资源依旧充足且部分工厂缓冲区未满，则继续进行额外分配，直到资源耗尽或所有工厂的缓冲区达到上限。

以上两个环节形成了一个闭环：工厂输出的产品与资源消耗、仓库的补给和调配相互影响，共同驱动了整个行星模拟的生产流程。 